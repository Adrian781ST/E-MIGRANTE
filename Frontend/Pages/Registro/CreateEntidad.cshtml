@page
@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager

@model Frontend.Pages.Registro.CreateEntidadModel
@{
    ViewData["Title"] = "Registrar Entidad";
}

<div class="row justify-content-center">
    <div class="col-lg-8">
        <div class="card shadow-sm border-0">
            <div class="card-body p-5">
                <div class="text-center mb-4">
                    <i class="fas fa-building text-success" style="font-size: 4rem;"></i>
                    <h2 class="mt-3 fw-bold">@ViewData["Title"]</h2>
                    <p class="text-muted">Completa la información de tu entidad</p>
                </div>
                
                @if (!string.IsNullOrEmpty(ViewData["Mensaje"] as string))
                {
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>@ViewData["Mensaje"]
                    </div>
                }
                @if(ViewData["Error"] as string == "ErrorCreate")
                {
                    <div class="alert alert-danger">
                        <i class="fas fa-exclamation-circle me-2"></i>
                        Esta entidad ya se encuentra registrada. 
                        <a href="/Entidades" class="alert-link">Click aquí</a> para ver las entidades.
                    </div>
                }
                
                <form method="post">
                    <div asp-validation-summary="ModelOnly" class="text-danger mb-3"></div>
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.RazonSocial" class="form-control" placeholder="Razón Social" />
                                <label asp-for="_entidad.RazonSocial"><i class="fas fa-building me-2"></i>Razón Social</label>
                                <span asp-validation-for="_entidad.RazonSocial" class="text-danger small"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.NIT" class="form-control" placeholder="NIT" />
                                <label asp-for="_entidad.NIT"><i class="fas fa-id-card me-2"></i>NIT</label>
                                <span asp-validation-for="_entidad.NIT" class="text-danger small"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.Direccion" class="form-control" placeholder="Dirección" />
                                <label asp-for="_entidad.Direccion"><i class="fas fa-map-marker-alt me-2"></i>Dirección</label>
                                <span asp-validation-for="_entidad.Direccion" class="text-danger small"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.Telefono" class="form-control" placeholder="Teléfono" />
                                <label asp-for="_entidad.Telefono"><i class="fas fa-phone me-2"></i>Teléfono</label>
                                <span asp-validation-for="_entidad.Telefono" class="text-danger small"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.Direccion_Electronica" class="form-control" placeholder="Correo" />
                                <label asp-for="_entidad.Direccion_Electronica"><i class="fas fa-envelope me-2"></i>Correo Electrónico</label>
                                <span asp-validation-for="_entidad.Direccion_Electronica" class="text-danger small"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.Ciudad" class="form-control" placeholder="Ciudad" />
                                <label asp-for="_entidad.Ciudad"><i class="fas fa-city me-2"></i>Ciudad</label>
                                <span asp-validation-for="_entidad.Ciudad" class="text-danger small"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <input asp-for="_entidad.Pagina_Web" class="form-control" placeholder="Página Web" />
                                <label asp-for="_entidad.Pagina_Web"><i class="fas fa-globe me-2"></i>Página Web</label>
                                <span asp-validation-for="_entidad.Pagina_Web" class="text-danger small"></span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-floating mb-3">
                                <select asp-for="_entidad.Sector" class="form-select" asp-items="@Model._listaSector">
                                    <option value="-1">Seleccionar Sector</option>
                                </select>
                                <label asp-for="_entidad.Sector"><i class="fas fa-industry me-2"></i>Sector</label>
                                <span asp-validation-for="_entidad.Sector" class="text-danger small"></span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-floating mb-4">
                        <select asp-for="_entidad.Servicios" class="form-select" asp-items="@Model._listaServicios">
                            <option value="-1">Seleccionar Servicio</option>
                        </select>
                        <label asp-for="_entidad.Servicios"><i class="fas fa-concierge-bell me-2"></i>Servicios</label>
                        <span asp-validation-for="_entidad.Servicios" class="text-danger small"></span>
                    </div>
                    
                    <input type="hidden" asp-for="_entidad.userName" value="@User.Identity.Name" />
                    
                    <div class="d-grid">
                        <button type="submit" class="btn btn-success btn-lg">
                            <i class="fas fa-save me-2"></i>Registrar Entidad
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts{
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
